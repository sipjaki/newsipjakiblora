<!-- Tombol KTP -->
<td style="text-align: center;">
    <button class="btn btn-secondary btn-sm"
        style="border-radius: 15px; padding: 8px 16px; background-color: #6c757d; color: white; border: none; transition: background-color 0.3s, color 0.3s;"
        onmouseover="this.style.backgroundColor='#ffffff'; this.style.color='#6c757d'; this.style.border='1px solid #6c757d';"
        onmouseout="this.style.backgroundColor='#6c757d'; this.style.color='white'; this.style.border='none';"
        data-bs-toggle="modal" data-bs-target="#modalKtp3">
        <i class="fas fa-eye"></i> Lihat
    </button>

    <!-- Modal KTP -->
    <div class="modal fade" id="modalKtp3" tabindex="-1" aria-labelledby="modalKtpLabel3" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <a href="#"><img src="/assets/abgblora/logo/logokabupatenblora.png" alt="Logo" width="25" style="margin-right: 5px;"></a>
                    <a href="#"><img src="/assets/abgblora/logo/logopupr.png" alt="Logo" width="25" style="margin-right: 5px;"></a>
                    <span>:</span>
                    <h5 class="modal-title" id="modalKtpLabel3">Berkas KTP</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                                            <img src="https://abgdpuprblora.com/06_krk/01_krkusaha/01_ktp/1745393042_istockphoto-91197392-1024x1024.jpg" alt="KTP" class="img-fluid">
                                    </div>
            </div>
        </div>
    </div>
</td>




for ($i = 1; $i <= 17; $i++) {
    bujkkonsultan::where('id', $i)->update([
        'user_id' => 10,
    ]);
}







public function bebujkkonstruksicreateklasifikasi($namalengkap)
{
    $bujkkontraktor = bujkkontraktor::findOrFail($namalengkap); // Cari 1 data sesuai ID
    $user = Auth::user();
    $asosiasimasjaki = asosiasimasjaki::all();

    return view('backend.04_datajakon.01_bujkkonstruksi.createklasifikasi', [
        'bujkkontraktornamalengkap' => $bujkkontraktor->namalengkap, // Ini dikirim ke form
        'bujkkontraktor_id' => $bujkkontraktor->id, // Ini dikirim ke form
        'user' => $user,
        'asosiasimasjaki' => $asosiasimasjaki,
        'title' => 'Create BUJK Sub Klasifikasi'
    ]);
}

public function bebujkkonstruksicreateklasifikasicreate(Request $request)
{
    // Validasi input
    $validated = $request->validate([
        'nama_pengurus' => 'required|string|max:255',
        'sub_klasifikasi_layanan' => 'required|string|max:255',
        'kode' => 'required|string|max:50',
        'kualifikasi' => 'required|string|max:255',
        'penerbit' => 'required|string|max:255',
        'nama_psjk' => 'required|string|max:255',
        'sub_kualifikasi_bu' => 'required|string|max:255',
        'tanggal_terbit' => 'required|date',
        'tanggal_berlaku' => 'required|date',
    ], [
        // Pesan kesalahan custom
        'nama_pengurus.required' => 'Nama Pengurus harus diisi.',
        'sub_klasifikasi_layanan.required' => 'Sub Klasifikasi Layanan harus diisi.',
        'kode.required' => 'Kode Sub Klasifikasi harus diisi.',
        'kualifikasi.required' => 'Kualifikasi harus diisi.',
        'sub_kualifikasi_bu.required' => 'Sub Bidang harus diisi.',
        'penerbit.required' => 'Penerbit harus diisi.',
        'nama_psjk.required' => 'Nama PSJK harus diisi.',
        'tanggal_terbit.required' => 'Tanggal Terbit harus diisi.',
        'tanggal_berlaku.required' => 'Tanggal Berlaku harus diisi.',
    ]);

    // Menyimpan data ke tabel BujkKontraktorSub
    $bujkkontraktorSub = bujkkontraktorsub::create([
        'bujkkontraktor_id' => $request->bujkkontraktor_id,
        'nama_pengurus' => $validated['nama_pengurus'],
        'sub_klasifikasi_layanan' => $validated['sub_klasifikasi_layanan'],
        'kode' => $validated['kode'],
        'kualifikasi' => $validated['kualifikasi'],
        'sub_kualifikasi_bu' => $validated['sub_kualifikasi_bu'],
        'penerbit' => $validated['penerbit'],
        'nama_psjk' => $validated['nama_psjk'],
        'tanggal_terbit' => $validated['tanggal_terbit'],
        'tanggal_berlaku' => $validated['tanggal_berlaku'],
    ]);

    // Ambil bujkkontraktor_id yang baru saja disimpan
    $bujkkontraktorId = $bujkkontraktorSub->bujkkontraktor_id;

    // Flash message untuk memberi tahu pengguna bahwa data berhasil disimpan
    session()->flash('create', 'Data Sub Klasifikasi Layanan berhasil di buat.');

    // Redirect ke route 'bebujkkonstruksi.showsubklasifikasi' dengan parameter bujkkontraktor_id
    return redirect('bebujkkonstruksi');
}


